<section ng-init="checkCMUser()" class="row" data-ng-controller="InventoryController" ng-init="hideInventory=true">

	<h4> Inventory </h4>
	<hr>

		<div class="list-group clearfix">
		<a href="#" class="list-group-item disabled">Add inventory item</a>
		<div class="list-group-item clearfix">
			<h4> Add inventory item</h4>
			<div class="col-xs-offset-2 col-xs-8 col-md-offset-5 col-md-2">
				<!--Add an inventory item-->
				<form name="addInventoryItemForm" data-ng-submit="create(addInventoryItemForm.$valid)" class="signin form-horizontal" autocomplete="off">
					<fieldset>
						<div class="form-group">
							<label for="itemAddName">Inventory item name</label>
							<input type="text" id="itemAddName" name="itemAddName" class="form-control" data-ng-model="inventory.itemName" placeholder="Item Name">
						</div>

						<div class="form-group">
							<label for="itemQuantity">Quantity</label>
							<input type="number" min = 0 id="itemQuantity" name="itemQuantity" class="form-control" data-ng-model="inventory.quantity" placeholder="Quantity">
						</div>

                        <div class="form-group">
                            <label for="itemUnit">Unit</label>
                            <select id="itemUnit" placeholder = "units" name="itemUnit" class="form-control" data-ng-model="inventory.unit">
                                <option value='g'>grams</option>
                                <option value='mg'>milligrams</option>
                                <option value='kg'>kilograms</option>
                                <option value='ml'>millilitres</option>
                                <option value='l'>litre</option>
                                <option value='units'>units</option>
                            </select>
                        </div>

						<div class="text-center form-group">
							<button type="submit" class="btn btn-large btn-primary">Add</button>
						</div>

						<!--Error/Success message-->
						<div data-ng-show="success" class="text-center text-success">
							<strong data-ng-bind="success">Action completed successfully.</strong>
						</div>
						<div data-ng-show="error" class="text-center text-danger">
							<strong data-ng-bind="error"></strong>
						</div>
					</fieldset>
				</form>
			</div>
		</div>
	</div>


	<!--Search and update inventory item-->
	<div class="list-group clearfix">
		<a href="#" class="list-group-item disabled">Search inventory item</a>
		<div class="list-group-item clearfix">
			<h4> Search inventory item </h4>
			<div class="col-xs-offset-2 col-xs-8 col-md-offset-5 col-md-2">
				<form name="searchInventoryForm" data-ng-submit="searchInventory(searchInventoryForm.$valid)" class="signin form-horizontal" autocomplete="off">
					<!--Search for a menu item-->

					<div class = "form-group">
						<input type="text" id="itemNameSearch" name ="itemNameSearch" class = "form-control" data-ng-model="itemNameSearch" placeholder="Item Name">
					</div>

					<div class = "text-center form-group">
						<button type = "submit" class = "btn btn-large btn-primary"><!--ng-submit="inventory.findOne()"--> Search</button>
					</div>
                </form>

				<!--Delete or update if item found-->

				<!--Update the item -->
				<div ng-show="successFind" class="text-center">

					<form name="updateInventoryForm" data-ng-submit="updateInventory(updateInventoryForm.$valid)" class="signin form-horizontal" autocomplete="off">

                            <h4>Update inventory item</h4>

							<!--Fields to update-->

                            <div class="form-group">
                                <label for="itemName">Inventory item name</label>
                                <input type="text" id="itemName" name="itemName" class="form-control" data-ng-model="itemUpdateName">
                            </div>

                            <div class="form-group">
                                <label for="Quantity">Quantity</label>
                                <input type="number" min =0 id="Quantity" name="Quantity" class="form-control" data-ng-model="updateQuantity" placeholder="Quantity">
                            </div>

                            <div class="form-group">
                                <label for="Unit">Unit</label>
                                <select id="Unit" name="Unit" class="form-control" data-ng-model="updateUnit">
                                    <option value='g'>grams</option>
                                    <option value='mg'>milligrams</option>
                                    <option value='kg'>kilograms</option>
                                    <option value='ml'>millilitres</option>
                                    <option value='l'>litre</option>
                                    <option value='units'>units</option>
                                </select>
                            </div>

                            <div class = "text-center form-group">
                                <button type = "submit" class = "btn btn-large btn-primary" ng-click="showme=false"> Update</button>
                            </div>
                        </form>
					   <button class = "btn btn-large btn-primary" data-ng-hide="showme" ng-click = "hideInventory=true; deleteInventoryItem()" >Delete</button>

					</div>

					<!--Error/Success message for delete/update-->
					<div data-ng-show="errorMessage" class="text-center text-danger">
						<strong data-ng-bind="errorMessage"></strong>
                    </div>
                    <div data-ng-show="successMessage" class="text-center text-success">
						<strong data-ng-bind="successMessage"></strong>
                    </div>
			</div>
		</div>
	</div>

		<!---Edit quantity of items-->
	<div class="list-group clearfix">
		<a href="#" class="list-group-item disabled">Inventory Quantity</a>
			<div class="list-group-item clearfix">
				<h4> Edit quantity of items </h4>
				<div class="col-xs-offset-2 col-xs-8 col-md-offset-5 col-md-2">
					<div>
						<!--Error/Success message for delete/update-->
					<div data-ng-show="message" class="text-center text-success">
						<strong data-ng-bind="message"></strong>
                    </div>
						<form data-ng-show ="showInventory" ng-hide="hideInventory"  class="signin form-horizontal" autocomplete="off">
							<fieldset>
							<button ng-click = "updateInventoryQuantity()" class = "btn btn-large btn-primary" ng-show="showInventory" data-ng-hide="hideInventory">Save</button>
								<div   ng-repeat = "invenProduct in allInventory.inventoryProduct track by $index" >
									<label ng-bind = 'allInventory.inventoryProduct[$index]'>{{invenProduct.productName}}</label>
									<input class="form-control" type = "number" min =0 ng-model = 'allInventory.inventoryQuantity[$index]'/>
									<br>
								</div>

								<!--<p>allInventory</p>
								<pre>{{ allInventory | json }}</pre>

								<p>PQuantity</p>
								<pre>{{ previousQuantity | json }}</pre>-->

							</fieldset>
						</form>

						<!--Dynamically show inventory items to edit quantity-->
						<button  align="center" ng-hide="displayed" data-ng-show="hideInventory" data-ng-click="addFormFieldInventory(); showInventory = true" class = "btn btn-large btn-primary">Display inventory</button>
						<!--<button ng-show="displayed" ng-click="addFormFieldInventory()" class = "btn btn-large btn-primary" onclick="location.reload(true)">Refresh</button>-->
					</div>
				</div>
			</div>
	</div>

</section>
