<section ng-init="checkCMUser()" class="row" data-ng-controller="MenuItemsController">

	<h4> Manage Menu </h4>
	<hr>

	<div class="list-group clearfix">
		<a href="#" class="list-group-item disabled">Add product to menu</a>
		<div class="list-group-item clearfix">
			<h4> Add menu item </h4>
			<div class="col-xs-offset-2 col-xs-8 col-md-offset-5 col-md-2"  data-ng-controller="MenuItemsController">
				<form ng-init = "addFormField()" name="addMenuItemForm" data-ng-submit="createMenuItem(addMenuItemForm.$valid)" class="signin form-horizontal" autocomplete="off">
					<fieldset>
						<div class="form-group">
							<label for="itemName">Menu item name</label>
							<input type="text" id="menuItemAdd" name="menuItemAdd" class="form-control" data-ng-model="menuItem.itemNameAdd" placeholder="Item Name">
						</div>

						<div class="form-group">
							<label for="itemDescription">Description</label>
							<input type="text" id="itemDescription" name="itemDescription" class="form-control" data-ng-model="menuItem.itemDescription" placeholder="Description">
						</div>

						<div class="form-group">
							<label for="itemPrice">Price</label>
							<input type="number" min = 0 id="itemPrice" name="itemPrice" class="form-control" data-ng-model="menuItem.itemPrice" placeholder="Price">
						</div>

						<div class = "form-group">
						<label for="itemCategory">Category</label>
							<select id ="itemCategory" name ="itemCategory" class = "form-control" data-ng-model ="menuItem.itemCategory" >
								<option value = 'Toasted Sandwiches'>Toasted Sandwiches</option>
								<option value = 'Tramezzinis'>Tramezzinis</option>
								<option value = 'Burger Bar'>Burger Bar</option>
								<option value = 'Daily Lunches'>Daily Lunches</option>
								<option value = 'Salad Bar'>Salad Bar</option>
								<option value = 'Sweet Treats'>Sweet Treats</option>
								<option value = 'Resale Items'>Resale Items</option>
								<option value = 'On The Side'>On The Side</option>
								<option value = 'Extra'>Extra</option>
                                <option value = 'Drinks'>Drinks</option>
                                <option value = 'Special Of The Day'>Special Of The Day</option>
							</select>
						</div>



				<!-- Dynamically add ingredients -->
				<label>Ingredients</label>
					<div ng-init="loadInventoryItems()" data-ng-controller="InventoryController" ng-repeat = "ingredient in ingredients.ingredients track by $index" >
						
							<select  class="form-control" ng-model = 'ingredients.ingredients[$index]'/>
									<option  ng-repeat="item in inventoryItems" >{{item.productName}} ({{item.unit[0]}})</option>
							</select><br>
							<input class="form-control" placeholder ="Quantity"  type = "number" min =0 ng-model = 'ingredients.quantities[$index]'/>
							<a class = "btn" ng-click = "removeIngredientOption($index); removeOption = true">Remove</a>
							<br>
						
					</div>

					<!--Dynamically add ingredients button-->
				<a ng-click="addFormField()" class = "btn btn-large btn-primary">Add ingredients</a>
				<br>
				<br>
						<div class="text-center form-group">
							<button type="submit" class="btn btn-large btn-primary">Save</button>
						</div>
										<!--<p>Ingredient</p>

						<pre>{{ ingredients | json }}</pre>-->

						<!--Error/Success message-->
						<div data-ng-show="success" class="text-center text-success">
							<strong>Item added successfully.</strong>
						</div>
						<div data-ng-show="error" class="text-center text-danger">
							<strong data-ng-bind="error"></strong>
						</div>


					</fieldset>
				</form>
<div>


    </div>
			</div>
		</div>
	</div>

	<!-- Search, delete, and update menu items -->
	<div class="list-group clearfix"  data-ng-controller="MenuItemsController">
		<a href="#" class="list-group-item disabled">Search menu item</a>
			<div class="list-group-item clearfix">
				<h4> Search menu item </h4>
				<div class="col-xs-offset-2 col-xs-8 col-md-offset-5 col-md-2">
					<form name="searchMenuItemsForm" data-ng-submit="searchMenu(searchMenuItemsForm.$valid)" class="signin form-horizontal" autocomplete="off">
						<!--Search for a menu item-->
						<div class = "form-group">
							<input type="text" id="menuItemNameSearch" name ="menuItemNameSearch" class = "form-control" data-ng-model="menuNameSearch" placeholder="Item name">
						</div>

						<div class = "text-center form-group">
							<button type = "submit" class = "btn btn-large btn-primary">Search</button>
						</div>
						<br>
					</form>

					<!--Delete or update if item is found-->
					<div data-ng-show="successFind">
						<button class = "btn btn-large btn-primary"  ng-click="showme=true; loadIngredients()" data-ng-hide="showme">Update</button>
						<br>
						<br>
					</div>
					<div data-ng-show="successFind">
						<button class = "btn btn-large btn-primary" data-ng-hide="showme" ng-click = "deleteMenuItem()">Delete</button>
					</div>
					<!--Show if update -->
					<div ng-show="showme" class="text-center text-success">
                        <form name="updateMenuItemForm" data-ng-submit="updateMenuItem(updateMenuItemForm.$valid)" class="signin form-horizontal" autocomplete="off">
                            <h4>Update item</h4>
                            <div class="form-group">
                                <label for="itemName">Item Name</label>
                                <input type="text" id="itemName" name="itemName" class="form-control" data-ng-model="updateItemName">
                            </div>

							<div class="form-group">
                                <label for="itemUpdatePrice">Price</label>
                                <input type="text" id="itemUpdatePrice" name="itemUpdatePrice" class="form-control" data-ng-model="updateItemPrice">
                            </div>

							<div class="form-group">
                                <label for="itemUpdateDescription">Description</label>
                                <input type="text" id="itemUpdateDescription" name="itemUpdateDescription" class="form-control" data-ng-model="updateItemDescription">
                            </div>

                            <div class="form-group">
								<label for="itemCategory2">Category</label>
								<select id ="itemCategory2" name ="itemCategory2" class = "form-control" data-ng-model ="updateItemCategory" value = {{updateItemCategory}}>
									<option value = 'Toasted Sandwiches'>Toasted Sandwiches</option>
									<option value = 'Tramezzinis'>Tramezzinis</option>
									<option value = 'Burger Bar'>Burger Bar</option>
									<option value = 'Daily Lunches'>Daily Lunches</option>
									<option value = 'Salad Bar'>Salad Bar</option>
									<option value = 'Special Of The Day'>Special Of The Day</option>
									<option value = 'Sweet Treats'>Sweet Treats</option>
									<option value = 'Resale Items'>Resale Items</option>
									<option value = 'Extra'>Drinks</option>
									<option value = 'On The Side'>On The Side</option>
									<option value = 'Extra'>Extra</option>									
								</select>
                            </div>

							<div>
								<label>Ingredients</label>
								<div ng-repeat = "ingredient in loadedIngredients.ingredients track by $index" >
									<label ng-bind = 'loadedIngredients.ingredients[$index]'>{{loadedIngredients.ingredients}}</label>
									<input class="form-control" type = "number" min =0 ng-model = 'loadedIngredients.quantities[$index]'/>

									<a class = "btn" ng-click = "removeIngredient($index); removed = true" ng-hide="removed" ng-show="!removed">Remove</a>
									<a class = "btn" ng-click = "undoRemoveIngredient($index); removed=false" ng-show="removed">Undo remove</a>

									<br>
								</div>
							</div>

						<!--Add more ingredients to item-->
						<h4>Add more ingredients </h4>
						<div ng-init="loadInventoryItems()" data-ng-controller="InventoryController" ng-repeat = "ingredient in addedUpdateIngredients.ingredients track by $index" >
							<!--<label ng-bind = 'addedUpdateIngredients.ingredients[$index]'>{{addedUpdateIngredients.ingredients}}</label>-->
							<select  class="form-control" ng-model = 'addedUpdateIngredients.ingredients[$index]'/>
									<option  ng-repeat="item in inventoryItems" >{{item.productName}} ({{item.unit[0]}})</option>
							</select><br>
							<input class="form-control" placeholder ="Quantity"  type = "number" min =0 ng-model = 'addedUpdateIngredients.quantities[$index]'/>
							<a class = "btn" ng-click = "removeIngredientOptionUpdate($index); removeOption = true">Remove</a>
							<br>
						</div>

						<a ng-click="addMoreIngredientsUpdate()" class = "btn btn-large btn-primary">Add more ingredients</a>

						<br>
                            <div class = "text-center form-group">
                                <!--<button type = "submit" class = "btn btn-large btn-primary" onclick= "location.reload(true)" ng-click = "upadateMenuItem()"> Update</button>-->
                                <button type = "submit" class = "btn btn-large btn-primary" ng-click = "upadateMenuItem();"> Update</button>

							</div>
                        </form>
					</div>
					<!--<p>IaddedUpdateIngredients</p>

						<pre>{{ addedUpdateIngredients | json }}</pre>-->
						
						<!--<p>loadedIngredients</p>

						<pre>{{loadedIngredients | json }}</pre>
					<!--Success or Error message-->
						 <div data-ng-show="successMessage" class="text-center text-success">
                            <strong data-ng-bind="successMessage"></strong>
                        </div>
                        <div data-ng-show="errorMessage" class="text-center text-danger">
                            <strong data-ng-bind="errorMessage"></strong>
                        </div>

				</div>
			</div>
	</div>
</section>
